<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/login.css}">
    <link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon" />
    <title>Login</title>
</head>
<body>

      <div class="toast" id="toastMessage"></div>

      <div class="login-wrap">
        <div class="login-html">
          <input id="tab-1" type="radio" name="tab" class="sign-in" checked><label for="tab-1" class="tab">SIGN IN</label>
          <input id="tab-2" type="radio" name="tab" class="sign-up"><label for="tab-2" class="tab">SIGN UP</label>
          <div class="login-form">

            <form th:action="@{/login}" method="post">

              <div class="sign-in-htm">
                <div class="group">
                  <label for="username" class="label">Email</label>
                  <input id="username" name="username" type="text" class="input">
                </div>
                <div class="group">
                  <label for="password" class="label">Password</label>
                  <input id="password" type="password" name="password" class="input" data-type="password">
                </div>
                <div class="group">
                  <input id="check" type="checkbox" class="check" checked>
                  <label for="check"><span class="icon"></span> Keep me Signed in</label>
                </div>
                <div class="group">
                  <input type="submit" class="button" value="Sign In">
                </div>
                <div class="hr"></div>
                <div class="foot-lnk">
                  <a href="#forgot">Forgot Password?</a>
                </div>
              </div>
            </form>

            <form th:action="@{/register}" 
                    method="post" 
                    th:object="${user}">

              <div class="sign-up-htm">
                <div class="group">
                  <label for="firstName" class="label">First name</label>
                  <input type="text" th:field="*{firstName}" class="input" id="firstName">
                </div>
                <div class="group">
                  <label for="lastName" class="label">Last name</label>
                  <input id="lastName" th:field="*{lastName}" type="text" class="input" data-type="text">
                </div>
                <div class="group">
                  <label for="email" class="label">Email</label>
                  <input id="email" th:field="*{email}" type="text" class="input">
                </div>
                <div class="group">
                  <label for="password" class="label">Password</label>
                  <input id="password" th:field="*{password}" type="password" class="input" data-type="password">
                </div>
                <div class="group">
                  <input type="submit" class="button" value="Sign Up">
                </div>
                <div class="hr"></div>
                <div class="foot-lnk">
                  <label for="tab-1">Already Member?</a>
                </div>
              </div>

            </form>


          </div>
        </div>
      </div>

      <script>

      var errorList = [
        {
          name: "logout",
          message: "You have been logged out!",
          background: "red"
        },
        {
          name: "error",
          message: "Invalid username or password!",
          background: "red"
        },
        {
          name: "hasError",
          message: "Some error occured. Please Try again!",
          background: "red"
        },
        {
          name: "success",
          message: "Registration successful!",
          background: "green"
        },
        {
          name: "same",
          message: "This email has already been used!",
          background: "red"
        },
      ];

        function checkParam() {
          var urlParams = window.location.search;

          for(var i = 0; i < errorList.length; i++) {
            if(urlParams.includes(errorList[i].name)) {
              var toastMessage = document.getElementById('toastMessage');
              toastMessage.innerText = errorList[i].message;
              toastMessage.style.display = 'block';
              toastMessage.style.backgroundColor = errorList[i].background
              setTimeout(function() {
                toastMessage.style.display = 'none';
              }, 5000);
            }
          }

        }
      
        // Gọi hàm kiểm tra khi trang web được tải xong
        window.onload = checkParam;
      </script>
      

</body>
</html>